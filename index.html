<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Azthera SMP</title>
  <style>
    :root{
      --bg-dark: #070707;
      --card-dark: #121215;
      --text-dark: #e9eef6;
      --accent: #3da9fc; /* soft blue */
      --muted: #9aa6b2;
      --glass: rgba(255,255,255,0.03);
    }
    [data-theme="light"]{
      --bg-dark: #f6f8fb;
      --card-dark: #ffffff;
      --text-dark: #0b0b0b;
      --accent: #2b7cff;
      --muted: #56606b;
      --glass: rgba(0,0,0,0.03);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", system-ui, -apple-system, Roboto, Arial;}
    body{
      background:var(--bg-dark);
      color:var(--text-dark);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 20px;
      transition:background .25s,color .25s;
      -webkit-font-smoothing:antialiased;
    }

    /* Main card (linktree style) */
    .card{
      width:100%;
      max-width:460px;
      background:linear-gradient(180deg,var(--card-dark),rgba(255,255,255,0.02));
      border-radius:16px;
      padding:28px;
      box-shadow:0 8px 30px rgba(0,0,0,0.6);
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    .title{
      margin:0 0 6px 0;
      font-size:1.6rem;
      font-weight:700;
      color:var(--accent);
      text-shadow:0 0 8px rgba(61,169,252,0.06);
    }
    .subtitle{margin:0;color:var(--muted);font-size:0.95rem;margin-bottom:18px}

    .links{display:flex;flex-direction:column;gap:12px}
    .links a{
      display:block;padding:12px 16px;border-radius:12px;
      background:var(--bg-dark); color:var(--text-dark);
      text-decoration:none;border:1px solid rgba(255,255,255,0.03);
      font-weight:600;transition:transform .14s ease, box-shadow .14s;
    }
    .links a:hover{transform:translateY(-4px); box-shadow:0 14px 30px rgba(0,0,0,0.45)}
    .links a .emoji{margin-right:8px}

    footer{margin-top:18px;color:var(--muted);font-size:0.85rem}

    /* menu button (hamburger) top-right fixed) */
    #menuBtn{
      position:fixed; right:18px; top:18px;
      background:var(--card-dark); color:var(--accent);
      border:1px solid rgba(255,255,255,0.02);
      padding:8px 10px;border-radius:10px; cursor:pointer; z-index:50;
      box-shadow:0 6px 18px rgba(0,0,0,0.6);
    }
    #menuBtn:hover{transform:scale(1.03)}

    /* right side drawer (thin) */
    .drawer{
      position:fixed;
      right:12px;
      top:50%;
      transform:translateY(-50%);
      width:64px;
      background:var(--card-dark);
      border-radius:999px;
      padding:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:center;
      z-index:45;
      box-shadow:0 10px 30px rgba(0,0,0,0.5);
      transition:width .28s ease, background .28s;
      overflow:hidden;
    }
    .drawer.open{width:320px;border-radius:12px;padding:18px 16px}
    .drawer .drawer-title{color:var(--accent);font-weight:700;margin-bottom:6px;opacity:0;transition:opacity .2s}
    .drawer.open .drawer-title{opacity:1}
    .drawer .icon-btn{
      width:44px;height:44px;border-radius:10px;background:var(--glass);
      display:flex;align-items:center;justify-content:center;color:var(--accent);cursor:pointer;
      border:1px solid rgba(255,255,255,0.02);
    }
    .drawer .menu-item{
      display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;cursor:pointer;color:var(--text-dark);
      width:100%;background:transparent;border:none;text-align:left;font-weight:600;
    }
    .drawer .menu-item:hover{background:rgba(255,255,255,0.02); color:var(--accent)}

    /* full panel (content opened after selecting) */
    .panel{
      position:fixed; inset:0; display:none; z-index:60;
      background:linear-gradient(180deg, rgba(0,0,0,0.72), rgba(0,0,0,0.88));
      align-items:center;justify-content:center;padding:30px;
    }
    .panel.active{display:flex}
    .panel .box{
      width:100%;max-width:720px;border-radius:12px;padding:24px;background:var(--card-dark);
      box-shadow:0 20px 50px rgba(0,0,0,0.7); color:var(--text-dark);
    }
    .panel h2{margin:0 0 8px 0;color:var(--accent)}
    .panel p{margin:6px 0;color:var(--muted)}

    .close-panel{
      position:absolute; right:20px; top:20px; background:var(--glass); color:var(--accent);
      padding:8px 10px;border-radius:10px;border:0; cursor:pointer;
    }

    /* responsive */
    @media (max-width:560px){
      .drawer{right:10px}
      .drawer.open{width:260px}
      .card{padding:20px}
    }
  </style>
</head>
<body>

  <!-- main card -->
  <div class="card" role="main" aria-label="Azthera links">
    <h1 class="title">Azthera SMP</h1>
    <div class="subtitle">Official Links</div>

    <div class="links" id="links">
      <a href="https://youtube.com/@azthera.smp.server?si=s8ZxzU9O5QYf0AcH" target="_blank"><span class="emoji">üé•</span> YouTube</a>
      <a href="https://discord.gg/jfvsWcGpq7" target="_blank"><span class="emoji">üéÆ</span> Discord</a>
      <a href="https://chat.whatsapp.com/C5ys8VP3mahJeL9yZr6Tbo" target="_blank"><span class="emoji">üí¨</span> WhatsApp</a>
      <a href="https://www.tiktok.com/@azthera.smp" target="_blank"><span class="emoji">üéµ</span> TikTok</a>
      <a href="https://www.instagram.com/Afn.mc" target="_blank"><span class="emoji">üì∏</span> Instagram</a>
    </div>

    <footer>¬© 2025 Azthera SMP</footer>
  </div>

  <!-- small menu button (for fallback / quick open) -->
  <button id="menuBtn" aria-label="Open menu">‚ò∞</button>

  <!-- right drawer (collapsed by default) -->
  <div id="drawer" class="drawer" role="navigation" aria-label="Menu drawer">
    <div id="drawerIcon" class="icon-btn" title="Menu">‚â°</div>
    <div class="drawer-title" id="drawerTitle">Azthera SMP</div>

    <!-- NOTE: menu items visible when drawer opens -->
    <div id="drawerItems" style="width:100%;margin-top:8px;display:none">
      <button class="menu-item" id="openStatusBtn">üñ•Ô∏è Server Status</button>
      <button class="menu-item" id="openSettingsBtn">‚öôÔ∏è Settings</button>
      <button class="menu-item" id="closeDrawerBtn" style="color:var(--muted)">‚úñ Tutup</button>
    </div>
  </div>

  <!-- Server Status Panel (fullscreen) -->
  <div id="statusPanel" class="panel" aria-hidden="true">
    <button class="close-panel" id="closeStatusPanel">‚úï</button>
    <div class="box">
      <h2>Server Status</h2>
      <p><strong>mc.noxstore.site:25567</strong></p>
      <p>Status: <span id="serverState">Checking...</span></p>
      <p>Players: <span id="serverPlayers">-</span></p>
      <p>Ping: <span id="serverPing">-</span></p>
      <div style="margin-top:14px">
        <button id="refreshStatus" style="background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer">Refresh</button>
      </div>
    </div>
  </div>

  <!-- Settings Panel (fullscreen) -->
  <div id="settingsPanel" class="panel" aria-hidden="true">
    <button class="close-panel" id="closeSettingsPanel">‚úï</button>
    <div class="box" style="text-align:left">
      <h2>Settings</h2>
      <p style="color:var(--muted)">Tema</p>
      <div style="display:flex;gap:10px;align-items:center;margin-top:8px">
        <button id="themeDark" style="flex:1;padding:10px;border-radius:8px;border:0;background:var(--card-dark);color:var(--text-dark);cursor:pointer">Dark</button>
        <button id="themeLight" style="flex:1;padding:10px;border-radius:8px;border:0;background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04);cursor:pointer">Light</button>
      </div>

      <hr style="margin:16px 0;border:0;border-top:1px solid rgba(255,255,255,0.03)">

      <p style="color:var(--muted)">Lainnya</p>
      <button id="copyIP" style="margin-top:8px;padding:10px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer">Salin alamat server</button>
    </div>
  </div>

  <script>
    // Elements
    const menuBtn = document.getElementById('menuBtn');
    const drawer = document.getElementById('drawer');
    const drawerIcon = document.getElementById('drawerIcon');
    const drawerTitle = document.getElementById('drawerTitle');
    const drawerItems = document.getElementById('drawerItems');
    const openStatusBtn = document.getElementById('openStatusBtn');
    const openSettingsBtn = document.getElementById('openSettingsBtn');
    const closeDrawerBtn = document.getElementById('closeDrawerBtn');

    const statusPanel = document.getElementById('statusPanel');
    const settingsPanel = document.getElementById('settingsPanel');
    const closeStatusPanel = document.getElementById('closeStatusPanel');
    const closeSettingsPanel = document.getElementById('closeSettingsPanel');
    const refreshStatus = document.getElementById('refreshStatus');

    const serverState = document.getElementById('serverState');
    const serverPlayers = document.getElementById('serverPlayers');
    const serverPing = document.getElementById('serverPing');

    const themeDark = document.getElementById('themeDark');
    const themeLight = document.getElementById('themeLight');
    const copyIP = document.getElementById('copyIP');

    const SERVER = 'mc.noxstore.site';
    const PORT = '25567';

    // Drawer open/close logic
    let drawerOpen = false;
    function openDrawer(){
      drawer.classList.add('open');
      drawerItems.style.display = 'block';
      drawerOpen = true;
    }
    function closeDrawer(){
      drawer.classList.remove('open');
      drawerItems.style.display = 'none';
      drawerOpen = false;
    }

    // clicking menu button -> toggle drawer (small)
    menuBtn.addEventListener('click', ()=>{
      if(drawerOpen) closeDrawer(); else openDrawer();
    });

    // clicking drawer icon also toggles
    drawerIcon.addEventListener('click', ()=>{
      if(drawerOpen) closeDrawer(); else openDrawer();
    });

    // close button inside drawer
    closeDrawerBtn.addEventListener('click', closeDrawer);

    // When choosing menu item: close drawer then open full panel
    openStatusBtn.addEventListener('click', ()=>{
      closeDrawer();
      openStatusPanel();
    });
    openSettingsBtn.addEventListener('click', ()=>{
      closeDrawer();
      openSettingsPanel();
    });

    // panel controls
    function openStatusPanel(){
      statusPanel.classList.add('active');
      statusPanel.setAttribute('aria-hidden','false');
      fetchServerStatus(); // fetch immediately
    }
    function closeStatusPanelFn(){
      statusPanel.classList.remove('active');
      statusPanel.setAttribute('aria-hidden','true');
    }
    function openSettingsPanel(){
      settingsPanel.classList.add('active');
      settingsPanel.setAttribute('aria-hidden','false');
    }
    function closeSettingsPanelFn(){
      settingsPanel.classList.remove('active');
      settingsPanel.setAttribute('aria-hidden','true');
    }

    closeStatusPanel.addEventListener('click', closeStatusPanelFn);
    closeSettingsPanel.addEventListener('click', closeSettingsPanelFn);

    // copy server ip
    copyIP.addEventListener('click', ()=>{
      const addr = `${SERVER}:${PORT}`;
      if(navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(addr).then(()=> {
          copyIP.textContent = 'Tersalin!';
          setTimeout(()=> copyIP.textContent = 'Salin alamat server', 1200);
        });
      }
    });

    // theme buttons
    function applyTheme(t){
      document.documentElement.setAttribute('data-theme', t === 'light' ? 'light' : 'dark');
      localStorage.setItem('az_theme', t);
    }
    themeDark.addEventListener('click', ()=> applyTheme('dark'));
    themeLight.addEventListener('click', ()=> applyTheme('light'));
    // init theme from storage or prefer
    const saved = localStorage.getItem('az_theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'dark');
    applyTheme(saved);

    // server status fetch (TrueMS)
    async function fetchServerStatus(){
      serverState.textContent = 'Checking...';
      serverPlayers.textContent = '-';
      serverPing.textContent = '-';
      try {
        const url = `https://api.mcstatus.io/v2/status/java/${SERVER}:${PORT}`;
        const t0 = performance.now();
        const res = await fetch(url, {cache:'no-store'});
        const t1 = performance.now();
        const data = await res.json();
        const truePing = Math.round(t1 - t0);

        if(data && data.online){
          serverState.textContent = 'üü¢ Online';
          serverPlayers.textContent = `${data.players?.online ?? 0}/${data.players?.max ?? '?'}`;
          serverPing.textContent = `${truePing} ms`;
        } else {
          serverState.textContent = 'üî¥ Offline';
          serverPlayers.textContent = '0';
          serverPing.textContent = '-';
        }
      } catch(e){
        serverState.textContent = '‚ö™ Error';
        serverPlayers.textContent = '-';
        serverPing.textContent = '-';
      }
    }

    // refresh button
    refreshStatus.addEventListener('click', fetchServerStatus);

    // auto-refresh while panel open (every 10s)
    let statusInterval = null;
    const obs = new MutationObserver(()=> {
      if(statusPanel.classList.contains('active')){
        // start interval
        if(!statusInterval) statusInterval = setInterval(fetchServerStatus, 10000);
      } else {
        if(statusInterval){ clearInterval(statusInterval); statusInterval = null; }
      }
    });
    obs.observe(statusPanel, { attributes:true, attributeFilter:['class'] });

    // close drawer if clicked outside (on body)
    document.addEventListener('click', (e)=>{
      if(drawerOpen){
        const inside = drawer.contains(e.target) || menuBtn.contains(e.target);
        if(!inside) closeDrawer();
      }
    });

    // keyboard ESC to close panels/drawer
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        if(statusPanel.classList.contains('active')) closeStatusPanelFn();
        if(settingsPanel.classList.contains('active')) closeSettingsPanelFn();
        if(drawerOpen) closeDrawer();
      }
    });
  </script>
</body>
</html>
